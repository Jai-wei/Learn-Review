# python面向对象
## 基本理论
- python是一门特别彻底的面向对象编程（OOP）的语言。其他语言的基本数据类型可能为```int、float、bool```，对象类型可能为```string、array```。但python中所有数据类型均为面向对象，包括```int、float```等。
- 面向对象和面向过程都是解决问题的一种方式（思想），面向对象本身是对面向过程的封装。
- 类的作用：根据抽象的类，生产具体的对象
- 类的组成：名称、属性、方法。**注意：** 以上属性和方法都是抽象的概念，在产生对象之后，对象才拥有具体的属性值、方法实现。
- 对象和类的关系：对象```抽象成```一个类，类```实例化```一个对象

## 面向对象在python中的实践
### 类的定义与实例化
**类的定义**
```python
class Money:
    pass

print(Money) # class
```
注意：
- 上面为经典类的定义，后面补充新式类
- 类名定义使用驼峰法
- 类名Money后不需要带()，如果添加则为继承的意思
- 类的```__name__ = Money```，并且Money是一个变量，它对这个类进行引用（类在创建完成以后，会生成一个```id```，Money引用这个id）。当执行```Money=6```时，只是它的引用变了，但是类名仍为```Money```
- 定义一个类以后，即使没有实例化，它也占用了内存

**类的实例化**
```python
one = Money()
print(one)  # object
print(one.__class__)  # class Money
```
注意：
- 根据Money类产生对象以后，```one```引用的也是实例化返回的```id```
***P8--图片*** 并补充class更改，可以确定到别的类上

### 类与对象的属性
- 属性和变量的区别及判定依据？
  - 区别1-概念：```变量```是可以改变的量值；```属性```是属于某个对象的特性
  - 区别2-访问权限：```变量```根据不同的位置，存在不同的访问权限(全局/局部/...)；```属性```只能通过对象来访问，对象也是通过变量名来引用，既然是变量，也有对应的访问权限
  - 判定依据：是否存在宿主

- 对象的属性：
  - 增：
    - 1、直接通过对象动态添加：```对象.属性=值```，此时会开辟新的内存来存储值，并将属性指向这个值
    - 2、通过类的初始化方法（构造方法）```__init__方法```，详见后文
  - 查：
    - 例：```print(p.age)```
    - 列举所有属性的值：```print(p.__dict__)```
  - 改：
    - ```对象.属性=值```，对象中无输入的属性时为增加，有的话为修改。修改时会重新开辟一块内存，然后让属性指向其唯一标识
    - 当执行```p.array.append('1')```时，与上面不同，会在```array```这个属性(数组类型)后开辟一块内存，而属性指向的唯一标识不变。实际上，```p.array```属于```查询操作```
  - 删：
    - 例：```del 对象.属性```
  - 注意事项：
    - 不同对象之间不能互相访问属性
    - 对象在内存中访问的是```__dict__```属性里字典的值
      ```python
      # 反向对对象中的dict赋值
      class Money:
        pass
      one = Money()
      one.__dict__ = {"name":"sz", "age":18}
      print(one.name)
      # 输出：sz
      ```

- 类的属性：
  - 增：
    - 1、```类.属性=值```
    - 2、在定义类时，直接在```class```里写入属性
  - 查：
    - 1、通过类访问：```类.类属性```
    - 2、通过对象访问：```对象.类属性```
    - 为什么可以通过对象访问类属性？答：与对象的属性查找机制有关，优先到对象自身去找属性；若没找到，则根据```__class__```找到对象对应的类，到这个类里去查找。**注意：** 如果手动改变```__class__```，则可以让对象指向其他的类
  - 改：
    - 1、```类.属性=值```
    - **不能**通过对象进行修改。**注意：** 不能直接使用```对象.属性=值```，因为这个属于赋值操作，赋值只会对对象生效，在对象中生成一个属性，而不会改变类里的值
  - 删：
    - 1、```del 类.属性```
    - **不能**通过对象进行删除，```del```语句只删除直系属性
  - 注意事项：
    - 类里的```__dict__```属性为**只读属性**，不能修改。后期可以通过```setattr```方法进行修改
    - 类属性被各个对象所共享：当类里的属性```x```的值改变，则它实例化的所有对象的属性```x```的值均改变
    - 限制对象属性的增加：对于其他语言，类实例化成对象以后，不能再向对象中添加其他属性（而python可以）。如果要限制增加，可以使用```__slots__```
      ```python
      class Person:
        __slots__ = ["age"] # 只允许实例化后的对象添加age属性
      
      p = Person()
      p.age = 50        # 正常添加
      p.name = "Green"  # 报错！
    ```

**类与对象属性测试题**：以下两个```print```分别输出什么？
```python
class Person:
  age = 10

p = Person()
p.age += 5
print(Person.age)
print(p.age)


##################
# 输出：   10    15
```





